# Data Model: Vision-Language-Action (VLA) & Autonomous Humanoid

## Core Entities

### VoiceCommand
**Description**: Natural language input that initiates robot behavior
**Fields**:
- `id`: Unique identifier for the command
- `text`: The transcribed text from speech input
- `confidence`: Confidence score from speech recognition (0.0-1.0)
- `timestamp`: When the command was received
- `language`: Language code of the input (e.g., "en-US")
- `intent`: Parsed intent from the command
- `parameters`: Extracted parameters from the command

### ActionSequence
**Description**: Ordered list of executable steps that achieve a specific goal
**Fields**:
- `id`: Unique identifier for the sequence
- `steps`: Array of ActionStep objects in execution order
- `status`: Current status (pending, executing, completed, failed)
- `createdAt`: Timestamp when sequence was created
- `estimatedDuration`: Estimated time to complete the sequence
- `priority`: Priority level for execution

### ActionStep
**Description**: Individual action within an action sequence
**Fields**:
- `id`: Unique identifier for the step
- `type`: Type of action (navigation, perception, manipulation, etc.)
- `parameters`: Parameters needed for the action
- `timeout`: Maximum time allowed for this step
- `dependencies`: Other steps that must complete before this one
- `successCriteria`: Conditions for step completion

### ROS2Command
**Description**: Standardized command message for ROS 2 execution
**Fields**:
- `id`: Unique identifier for the command
- `topic`: ROS 2 topic to publish to
- `messageType`: Type of message (e.g., geometry_msgs/Twist)
- `payload`: Command-specific data
- `timestamp`: When the command was generated
- `source`: Origin of the command (planner, sensor, etc.)

### CognitivePlan
**Description**: High-level plan generated by LLM from natural language input
**Fields**:
- `id`: Unique identifier for the plan
- `originalCommand`: The original voice command text
- `parsedIntent`: Parsed intent from the original command
- `subtasks`: Array of subtasks needed to complete the plan
- `constraints`: Environmental or robot-specific constraints
- `fallbacks`: Alternative approaches if primary plan fails

## Relationships

### VoiceCommand → CognitivePlan
- One VoiceCommand generates one CognitivePlan
- The CognitivePlan contains the original VoiceCommand reference

### CognitivePlan → ActionSequence
- One CognitivePlan can generate multiple ActionSequences
- ActionSequences are created based on the subtasks in the CognitivePlan

### ActionSequence → ActionStep
- One ActionSequence contains multiple ActionSteps
- ActionSteps are executed in the order specified in the ActionSequence

### ActionStep → ROS2Command
- One ActionStep can generate multiple ROS2Commands
- Each action step may require multiple ROS 2 commands to execute

## Validation Rules

### VoiceCommand Validation
- Text must not be empty
- Confidence score must be between 0.0 and 1.0
- Language code must be valid (e.g., follow BCP-47 standard)

### ActionSequence Validation
- Must contain at least one ActionStep
- Step dependencies must not create circular references
- Estimated duration must be positive

### ActionStep Validation
- Type must be one of: navigation, perception, manipulation, communication
- Timeout must be positive
- Dependencies must reference valid other steps in the same sequence

### ROS2Command Validation
- Topic name must follow ROS 2 naming conventions
- Message type must be a valid ROS 2 message type
- Payload must match the expected message structure

## State Transitions

### ActionSequence States
- `pending` → `executing`: When the first step begins
- `executing` → `completed`: When all steps complete successfully
- `executing` → `failed`: When a step fails and no fallback exists
- `executing` → `interrupted`: When execution is manually stopped

### ActionStep States
- `pending` → `executing`: When the step begins execution
- `executing` → `completed`: When the step completes successfully
- `executing` → `failed`: When the step fails to complete
- `executing` → `skipped`: When the step is bypassed due to conditions